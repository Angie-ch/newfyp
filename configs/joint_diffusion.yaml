# Configuration for Diffusion Model Training with Joint Autoencoder
# Operates on unified latent space containing ERA5 + IBTrACS

data:
  data_dir: "/Volumes/data/fyp2/data/data/processed_temporal_split"
  past_frames: 8
  future_frames: 12
  era5_channels: 48

model:
  # Autoencoder config
  era5_channels: 48
  latent_channels: 8
  autoencoder_checkpoint: "checkpoints/joint_autoencoder/best.pth"
  
  # Diffusion model config
  hidden_dim: 256
  num_heads: 8
  depth: 3
  use_physics: true
  use_spiral_attention: true
  use_multiscale_temporal: true

training:
  epochs: 100
  batch_size: 4
  learning_rate: 2.0e-4
  weight_decay: 0.01
  gradient_clip: 1.0
  
  # Diffusion schedule
  timesteps: 1000
  beta_start: 1.0e-4
  beta_end: 0.02
  beta_schedule: "linear"
  
  # Loss weights
  loss_weights:
    diffusion: 1.0
    track: 0.5
    intensity: 0.3
    physics: 0.2
    consistency: 0.1
  
  # Physics constraint weights
  physics_weights:
    energy: 0.3
    momentum: 0.3
    vorticity: 0.4
  
  # EMA
  ema_decay: 0.9999
  
  # Logging
  log_interval: 50
  save_interval: 5
  log_dir: "logs/joint_diffusion"
  save_dir: "checkpoints/joint_diffusion"
  
  # Data loading
  num_workers: 4

